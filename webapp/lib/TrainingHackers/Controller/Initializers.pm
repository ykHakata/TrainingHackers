package TrainingHackers::Controller::Initializers;
use strict;
use warnings;
use parent qw(TrainingHackers::Controller::Base);
use utf8;

sub index {
    my $self = shift;

    my $data = [
        {
            question => '以下の暗号を解読し、元の文字列を解読せよ。この暗号はシーザー暗号という暗号化方式を利用して暗号化されている。<br>Vwdb Kxqjub',
            answer => 'Stay Hungry',
            score => 10,
            level => 1,
            hint1 => 'Webでシーザー暗号を調べよう',
            hint2 => 'シーザー暗号は元のアルファベットをある規則に従って別のアルファベットに変換する暗号だ',
            hint3 => 'シーザー暗号は元のアルファベットを3文字後ろのアルファベットに置き換えるんだ',
            hint4 => 'aならd、bならe、cならfというように3文字後ろのアルファベットに変換する',
            hint5 => 'Vwdb Kxqjubという文字列はシーザー暗号化されたものだから、アルファベットを3文字前にずらせば元の文字列がわかる。例えばVの3文字前はS、wの3文字前はtというように変換しよう。',
        },
        {
            question => 'ソフトバンクグループ株式会社の代表取締役社長は誰でしょう？',
            answer => '1',
            score => 10,
            level => 1,
            hint1 => '高校生の頃に中退をして渡米を行っています',
            hint2 => '若い頃、慢性肝炎で生死をさまよった経験があります',
            hint3 => '坂本龍馬の大ファン',
            hint4 => '東日本大震災復興において多額の寄付を行っています',
            hint5 => '頭が薄いことをよくネタにします',
        },
        {
            question => 'クラッキング用ページのIDとパスワードをクラックせよ。クラックに成功したらパスワードの方を解答に入力してくれ。正解のIDとパスワードはクラッキング用ページのどこかにかかれているらしい。よく調べてくれ。',
            answer => 'wATFyXV66LYHsCsoMDCeQLMfmGzU3A4C',
            score => 10,
            level => 1,
            hint1 => 'まずはブラウザの機能でHTMLのソースを表示してみよう',
            hint2 => '右クリックでソースの表示を選択しよう',
            hint3 => 'ソースの中をくまなく調べてみよう',
            hint4 => 'ソースの中のHTMLのコメントアウト部分をよく見よう',
            hint5 => '真ん中あたりにidとpasswordが書いてあるぞ',
        },
        {
            question => 'プログラミング言語、Perl の開発者は誰でしょう？',
            answer => '2',
            score => 10,
            level => 1,
            hint1 => '言語学者でもあります',
            hint2 => 'プログラマの三大美徳というものを唱え始めました',
            hint3 => 'プログラミング Perl の共同著者です',
            hint4 => 'まつもとゆきひろ氏が尊敬をしている人物です',
            hint5 => 'とっても愛妻家',
        },
        {
            question => 'とある筋からユーザーIDとパスワードのリストを手に入れた。IDとパスワードはタブで区切られており、パスワードは暗号化されている。おそらくこのリストの中の誰かのアカウントがクラッキング用ページのIDとパスワードに一致するはずだ。暗号化されたパスワードを解読し、IDとパスワードをクラックせよ。',
            answer => 'nRoyhQNv',
            score => 10,
            level => 4,
            hint1 => 'パスワードはシーザー暗号化されているのでまずは暗号化される前の文字列にもどそう',
            hint2 => 'シーザー暗号がわからない人は問1のヒントを見よう',
            hint3 => 'リストの先頭から順番にIDとパスワードを入力してみよう',
            hint4 => '正解のIDはサイトのどこかに隠されている',
            hint5 => 'サイトからリンクされているid.jsを見てみよう',
        },
        {
            question => 'Facebook の創業者は誰でしょう？',
            answer => '3',
            score => 10,
            level => 1,
            hint1 => '高校時代は友達が非常に少なかったらしいです',
            hint2 => '大学時代に「Coursematch」というサービスを開発しています',
            hint3 => '画像格付けサイト「Facemash.com」は女子学生の容姿を格付けする内容で大学から保護観察処分',
            hint4 => 'いつも同じ服装である理由は仕事以外の意思決定を少なくしたいとのこと',
            hint5 => '名言「リスクを取らないことが一番のリスクだ」',
        },
        {
            question => '改ざん用ページのサイトを改ざんせよ。テキストボックスに文字列やプログラムを入力してサイトを改ざんするんだ。解答には改ざんに使用したプログラムや文字列を入力せよ。',
            answer => '',
            score => 10,
            level => 7,
            hint1 => 'サイトを改ざんするには現在表示されているページのHTMLを改ざんする必要がある',
            hint2 => 'テキストボックスに入力された文字を送信するとHTMLの一部としてWebページに表示される',
            hint3 => 'テキストボックスに特定の文字を入力して送信するとHTMLの一部としてページが表示される',
            hint4 => 'HTMLとは<h1>タイトル</h1>みたいなタグで囲まれた構文を持つ',
            hint5 => 'テキストボックスに適当なHTMLを入力してみよう',
        },
        {
            question => '下の写真が撮られたモスバーガーの店舗を特定せよ。解答には店名を入力せよ。(例えば天神北店)。写真には位置情報が埋め込まれているのでまずはそれを調べよう。',
            answer => '神楽坂下店',
            score => 10,
            level => 3,
            hint1 => '写真に埋め込まれた位置情報をExifというんだ',
            hint2 => 'Exifの情報を調べるサイトがあるぞ',
            hint3 => 'モスバーガーの写真をそのサイトで調べてみよう',
            hint4 => '位置情報がわかったらその場所をGoogle Mapsで調べてみよう',
            hint5 => 'http:://exif-check.orgで位置情報を調べられるぞ',
        },
        {
            question => '以下の実行ファイルを起動してパスワードをクラックせよ。実行ファイルの中身を解析すればパスワードがわかるかもしれない。',
            answer => 'hacker',
            score => 10,
            level => 10,
            hint1 => 'バイナリデータの中身をバイナリエディタで見てみよう',
            hint2 => 'バイナリエディタはWindowsの人はBZ、Macの人はhexeditというツールがあるぞ',
            hint3 => 'パスワードはプログラムの中に直接書かれている',
            hint4 => 'バイナリデータの中のASCII表示のパスワードが隠れているかもしれない',
            hint5 => 'パスワードはかなり簡単な文字列だ',
        },
        {
            question => 'この問題の答えはなんでしょう？',
            answer => 'おつかれさまでした',
            score => 10,
            level => 100,
            hint1 => '次のヒントをみるしかない！',
            hint2 => '見当もつかないだろ？',
            hint3 => '告知HPの問題が解けた君ならできるはずだけどなぁ？',
            hint4 => 'ソースコードを直接見るにはどうしたらいいんだっけ？',
            hint5 => 'この辺を右クリックしたら、ソースコードがみれるだろ？',
        },
        {
            question => 'IP アドレスを特定せよ！ このURL http://www.hatena.ne.jp/ の IP アドレスを特定して入力してくれ！',
            answer => '59.106.194.19',
            score => 10,
            level => 10,
            hint1 => 'URL アドレスはネームサーバーに問い合わせているんだね',
            hint2 => 'ネームサーバーに問い合わせると IP アドレスを教えてくれる',
            hint3 => 'ネームサーバーに問い合わせコマンドがあるんだよ',
            hint4 => 'ソースコードを直接見るにはどうしたらいいんだっけ？',
            hint5 => 'web ブラウザの機能を使うか UNIX のコマンドかどちらかだね',
        },
        {
            question => 'WEB サーバーを特定せよ！ このhackersLab.博多のwebアプリを配信している webサーバーを特定して入力してくれ！',
            answer => 'nginx',
            score => 10,
            level => 10,
            hint1 => '最近はwebサーバーもいろんな種類がある',
            hint2 => 'http ヘッダーに情報が隠されてるぞ',
            hint3 => 'サイトにアクセスすれば必ず返却されているはずなんだ',
            hint4 => 'おなじく、問い合わせるコマンドがあるぞ',
            hint5 => 'やはりweb ブラウザの機能を使うか UNIX のコマンドかどちらかだね',
        },
        {
            question => '時間の計算とは！ コンピューターは時間の計算を ****秒を基準に考えている、 **** にはなにが入るか答えよ',
            answer => 'エポック',
            score => 10,
            level => 10,
            hint1 => 'これは検索すれば簡単ですね',
            hint2 => '世界で共通化されているみたいだね',
            hint3 => 'UNIX時間ともいうみたいです',
            hint4 => '1970年',
            hint5 => 'UNIX時間で検索してみよう',
        },
        {
            question => 'うるう年を特定せよ！ 紀元前1,900年はうるう年か？うるう年なら true うるう年でないなら false を入力せよ！',
            answer => 'false',
            score => 10,
            level => 10,
            hint1 => 'うるう年の法則を覚えているかい？',
            hint2 => '4年一度だけではない',
            hint3 => '100年に一度の例外だけでもない',
            hint4 => '400年に一度の例外もある',
            hint5 => 'こういう計算こそプログラミングだ -> https://www.python.org/',
        },
        {
            question => 'プログラミングコードを解明せよ！ この Perl スクリプトを正しく実行するには **** になにを記述すればよいか！入力しくれ！',
            answer => 'grep',
            score => 10,
            level => 10,
            hint1 => '日本語のコメントを読んでなにをしているかイメージしよう',
            hint2 => '**** は標準関数だ',
            hint3 => '条件に一致するデータを検索していて戻り値はリストになる',
            hint4 => 'Perlは公式ドキュメントを日本語化されたものがある',
            hint5 => 'Perldoc.jp',
        },
        {
            question => '以下のバイナリファイルのフォーマットを答えよ',
            answer => '2',
            score => 10,
            level => 10,
            hint1 => 'バイナリファイルといってもいろんな種類がある',
            hint2 => '今回用意したファイルは実行ファイルだ',
            hint3 => 'Linux上で実行可能なファイルだ',
            hint4 => 'バイナリファイルの種類を調べるコマンドがある',
            hint5 => 'fileコマンドを使う',
        },
        {
            question => '以下のプログラムはとあるサイトにおけるログイン処理の一部である。$uidにはユーザー名、$passwordにはパスワードが入力されているとする。本来であればユーザー名とパスワードが一致しないとログインは出来ないが$uidにある入力を行うとパスワードを入力しなくてもログインができてしまう。その入力を答えよ。入力文字数は全部で11文字とする。なおこのサイトではkusakabeというユーザー名が存在していることは確認されている。',
            answer => 'kusakabe\'--',
            score => 10,
            level => 10,
            hint1 => 'ユーザーがどういう値を入力すれば今回の不具合がおきるか考えよう',
            hint2 => 'uid = $uidの部分が怪しいぞ',
            hint3 => 'password = $passwordの部分が無視されれば良いんだね',
            hint4 => 'uid = kusakabeとなれば良いんだね',
            hint5 => 'kusakabe\'--',
        },
        {
            question => '以下のPerlプログラムには脆弱性がある。$cmdにはユーザーの入力値が入っているとする。特定の文字を入れるとサーバーのファイル一覧が表示されてしまう。その入力を答えよ。入力文字数は2文字とする。',
            answer => 'ls',
            score => 10,
            level => 10,
            hint1 => 'system関数は何をする関数か調べよう',
            hint2 => 'system関数はOSのコマンドを実行する関数だ',
            hint3 => 'ユーザー入力がそのままsystem関数に渡されているね',
            hint4 => 'system関数に渡す引数にファイル一覧を表示するコマンドを渡せば良さそうだ',
            hint5 => 'ls',
        },
        {
            question => '以下のビット列の1の個数を数えよ',
            answer => '254',
            score => 10,
            level => 10,
            hint1 => '愚直に1ビットずつ数えてみよう',
            hint2 => 'ループを使って順番に処理しよう',
            hint3 => 'ビット列の長さを取得してループで回そう',
            hint4 => 'while文が使えそうだ',
            hint5 => 'while文でビット列をループで回して1の場合数えるという処理をすればいけそう',
        },
        {
            question => '3本の棒A,B,Cがある。最初,棒Aには5枚の円板が大きい順に重ねてさしてある。円板を棒から棒に1枚ずつ動かして全円板を棒Bに集めるとき、何回の移動で完了するか。それぞれの棒から棒へ円板を1枚移動を1回と数える。ただし小さい円板の上に大きい円板をのせてはならない。',
            answer => '31',
            score => 10,
            level => 10,
            hint1 => 'まずは円板が1つの場合を考えてみよう',
            hint2 => '次に円板が2つの場合、3つの場合を考える',
            hint3 => 'Bの棒に一番大きい円板を移すためには一旦Cの棒に一番大きい円板以外を移す必要がある',
            hint4 => 'その後にCの棒からBの棒へ移動させる',
            hint5 => 'ハノイの塔',
        },
    ];
    my $q = $self->model('Question');
    $q->db->query('truncate questions');

    for my $d (@$data) {
        $q->create($d);
    }
    $self->render(text => 'initialize OK');
}

1;
